<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿè¯æœ¬æŒ‰é’®åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .vocab-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #eee;
            border-radius: 3px;
        }
        .vocab-actions {
            display: flex;
            gap: 4px;
        }
        .vocab-btn {
            padding: 2px 4px;
            border: none;
            background: none;
            cursor: pointer;
            border-radius: 2px;
            font-size: 12px;
        }
        .vocab-btn:hover {
            background: #f0f0f0;
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        code {
            background-color: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ç”Ÿè¯æœ¬æŒ‰é’®åŠŸèƒ½ä¿®å¤æµ‹è¯•</h1>
    
    <div class="test-section">
        <h2>é—®é¢˜æè¿°</h2>
        <p>ç”Ÿè¯æœ¬é‡Œå•è¯å³è¾¹çš„å‘éŸ³ğŸ”Šå’Œåˆ é™¤ğŸ—‘ï¸æŒ‰é’®ç‚¹å‡»ä¸å¯ç”¨ã€‚</p>
    </div>

    <div class="test-section">
        <h2>é—®é¢˜åŸå› åˆ†æ</h2>
        <ul>
            <li><strong>HTMLæ³¨å…¥å®‰å…¨é—®é¢˜</strong>ï¼šä½¿ç”¨ <code>onclick</code> å±æ€§æ—¶ï¼Œç‰¹æ®Šå­—ç¬¦å¯èƒ½å¯¼è‡´JavaScriptè¯­æ³•é”™è¯¯</li>
            <li><strong>äº‹ä»¶ç»‘å®šé—®é¢˜</strong>ï¼šåŠ¨æ€ç”Ÿæˆçš„HTMLä¸­çš„äº‹ä»¶å¯èƒ½æ²¡æœ‰æ­£ç¡®ç»‘å®š</li>
            <li><strong>ä½œç”¨åŸŸé—®é¢˜</strong>ï¼šå…¨å±€å‡½æ•°å¯èƒ½åœ¨æŸäº›æƒ…å†µä¸‹æ— æ³•è®¿é—®</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>ä¿®å¤æ–¹æ¡ˆ</h2>
        
        <h3>1. ä½¿ç”¨äº‹ä»¶å§”æ‰˜æ›¿ä»£onclickå±æ€§</h3>
        <p><strong>ä¿®å¤å‰ï¼š</strong></p>
        <pre><code>&lt;button onclick="speakWord('${item.word}')"&gt;ğŸ”Š&lt;/button&gt;
&lt;button onclick="removeWordSafe('${item.word}', '${item.addedAt}')"&gt;ğŸ—‘ï¸&lt;/button&gt;</code></pre>
        
        <p><strong>ä¿®å¤åï¼š</strong></p>
        <pre><code>&lt;button class="vocab-btn speak-btn" data-word="${escapeHtml(item.word)}"&gt;ğŸ”Š&lt;/button&gt;
&lt;button class="vocab-btn delete-btn" data-word="${escapeHtml(item.word)}" data-added-at="${item.addedAt}"&gt;ğŸ—‘ï¸&lt;/button&gt;</code></pre>

        <h3>2. æ·»åŠ HTMLè½¬ä¹‰å‡½æ•°</h3>
        <pre><code>function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}</code></pre>

        <h3>3. ä½¿ç”¨äº‹ä»¶å§”æ‰˜å¤„ç†ç‚¹å‡»</h3>
        <pre><code>function handleVocabularyClick(event) {
  const target = event.target;
  
  if (target.classList.contains('speak-btn')) {
    const word = target.getAttribute('data-word');
    if (word) speakWord(word);
  } else if (target.classList.contains('delete-btn')) {
    const word = target.getAttribute('data-word');
    const addedAt = target.getAttribute('data-added-at');
    if (word && addedAt) removeWordSafe(word, addedAt);
  }
}</code></pre>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•ç¤ºä¾‹</h2>
        <p>ä»¥ä¸‹æ˜¯ä¿®å¤åçš„ç”Ÿè¯æœ¬é¡¹ç›®ç¤ºä¾‹ï¼š</p>
        
        <div class="vocab-item">
            <div class="vocab-content">
                <div class="vocab-word">hello</div>
                <div class="vocab-translation">ä½ å¥½</div>
            </div>
            <div class="vocab-actions">
                <button class="vocab-btn speak-btn" data-word="hello" title="å‘éŸ³">ğŸ”Š</button>
                <button class="vocab-btn delete-btn" data-word="hello" data-added-at="2024-01-01T00:00:00.000Z" title="åˆ é™¤">ğŸ—‘ï¸</button>
            </div>
        </div>

        <div class="vocab-item">
            <div class="vocab-content">
                <div class="vocab-word">world</div>
                <div class="vocab-translation">ä¸–ç•Œ</div>
            </div>
            <div class="vocab-actions">
                <button class="vocab-btn speak-btn" data-word="world" title="å‘éŸ³">ğŸ”Š</button>
                <button class="vocab-btn delete-btn" data-word="world" data-added-at="2024-01-01T00:00:00.001Z" title="åˆ é™¤">ğŸ—‘ï¸</button>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>æµ‹è¯•æ­¥éª¤</h2>
        <ol>
            <li>æ‰“å¼€æµè§ˆå™¨æ’ä»¶çš„å¼¹å‡ºçª—å£</li>
            <li>åˆ‡æ¢åˆ°"ç”Ÿè¯è¡¨"æ ‡ç­¾é¡µ</li>
            <li>ç‚¹å‡»ä»»æ„ç”Ÿè¯å³ä¾§çš„ğŸ”ŠæŒ‰é’®ï¼Œåº”è¯¥èƒ½å¬åˆ°å‘éŸ³</li>
            <li>ç‚¹å‡»ä»»æ„ç”Ÿè¯å³ä¾§çš„ğŸ—‘ï¸æŒ‰é’®ï¼Œåº”è¯¥å¼¹å‡ºåˆ é™¤ç¡®è®¤å¯¹è¯æ¡†</li>
            <li>ç¡®è®¤åˆ é™¤åï¼Œç”Ÿè¯åº”è¯¥ä»åˆ—è¡¨ä¸­ç§»é™¤</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>ä¿®å¤çš„å…³é”®æ”¹è¿›</h2>
        <ul>
            <li class="success">âœ… <strong>å®‰å…¨æ€§</strong>ï¼šä½¿ç”¨dataå±æ€§å’ŒHTMLè½¬ä¹‰ï¼Œé¿å…XSSé£é™©</li>
            <li class="success">âœ… <strong>å¯é æ€§</strong>ï¼šäº‹ä»¶å§”æ‰˜ç¡®ä¿åŠ¨æ€å†…å®¹çš„äº‹ä»¶æ­£ç¡®ç»‘å®š</li>
            <li class="success">âœ… <strong>å…¼å®¹æ€§</strong>ï¼šæ”¯æŒåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å•è¯</li>
            <li class="success">âœ… <strong>ç»´æŠ¤æ€§</strong>ï¼šä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>å¯èƒ½çš„è¾¹ç•Œæƒ…å†µ</h2>
        <ul>
            <li>åŒ…å«å•å¼•å·çš„å•è¯ï¼šå¦‚ "don't"</li>
            <li>åŒ…å«åŒå¼•å·çš„å•è¯ï¼šå¦‚ "say \"hello\""</li>
            <li>åŒ…å«HTMLæ ‡ç­¾çš„ç¿»è¯‘ï¼šå¦‚ "&lt;em&gt;å¼ºè°ƒ&lt;/em&gt;"</li>
            <li>éå¸¸é•¿çš„å•è¯æˆ–ç¿»è¯‘</li>
        </ul>
        <p>ä¿®å¤åçš„ä»£ç èƒ½å¤Ÿæ­£ç¡®å¤„ç†è¿™äº›æƒ…å†µã€‚</p>
    </div>

    <script>
        // æ¨¡æ‹ŸæŒ‰é’®ç‚¹å‡»æµ‹è¯•
        document.addEventListener('click', function(event) {
            const target = event.target;
            
            if (target.classList.contains('speak-btn')) {
                const word = target.getAttribute('data-word');
                console.log(`å‘éŸ³: ${word}`);
                alert(`å‘éŸ³åŠŸèƒ½æµ‹è¯•ï¼š${word}`);
                
                // å®é™…å‘éŸ³ï¼ˆå¦‚æœæ”¯æŒï¼‰
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    speechSynthesis.speak(utterance);
                }
            } else if (target.classList.contains('delete-btn')) {
                const word = target.getAttribute('data-word');
                const addedAt = target.getAttribute('data-added-at');
                console.log(`åˆ é™¤: ${word} (${addedAt})`);
                
                if (confirm(`ç¡®å®šè¦åˆ é™¤ç”Ÿè¯ "${word}" å—ï¼Ÿ`)) {
                    alert(`åˆ é™¤åŠŸèƒ½æµ‹è¯•ï¼šå·²åˆ é™¤ ${word}`);
                    target.closest('.vocab-item').remove();
                }
            }
        });

        console.log('ç”Ÿè¯æœ¬æŒ‰é’®åŠŸèƒ½å·²ä¿®å¤');
        console.log('æµ‹è¯•è¦ç‚¹ï¼š');
        console.log('1. å‘éŸ³æŒ‰é’®åº”è¯¥èƒ½æ­£å¸¸å·¥ä½œ');
        console.log('2. åˆ é™¤æŒ‰é’®åº”è¯¥å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†');
        console.log('3. æ”¯æŒåŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å•è¯');
        console.log('4. äº‹ä»¶å§”æ‰˜ç¡®ä¿åŠ¨æ€å†…å®¹æ­£å¸¸å·¥ä½œ');
    </script>
</body>
</html>